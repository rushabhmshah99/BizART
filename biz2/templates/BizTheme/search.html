<!DOCTYPE html>
<html lang="en">
<head>
{% include 'include.html' %}
</head>
<body class="sidebar-wide">
<!-- Navbar -->
<div class="navbar navbar-inverse" role="navigation">
  <div class="navbar-header"><a class="navbar-brand" href="#">Logo: BizART </a>
  </div>
  <ul class="nav navbar-nav navbar-right collapse" id="navbar-icons">
    <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown"><i class="icon-people"></i><span class="label label-default">2</span></a>
      <div class="popup dropdown-menu dropdown-menu-right">
        <div class="popup-header"><a href="#" class="pull-left"><i class="icon-spinner7"></i></a><span>Activity</span><a href="#" class="pull-right"><i class="icon-paragraph-justify"></i></a></div>
        <ul class="activity">
          <li> <i class="icon-cart-checkout text-success"></i>
            <div> <a href="#">Eugene</a> ordered 2 copies of <a href="#">OEM license</a> <span>14 minutes ago</span> </div>
          </li>
          <li> <i class="icon-heart text-danger"></i>
            <div> Your <a href="#">latest post</a> was liked by <a href="#">Audrey Mall</a> <span>35 minutes ago</span> </div>
          </li>
          <li> <i class="icon-checkmark3 text-success"></i>
            <div> Mail server was updated. See <a href="#">changelog</a> <span>About 2 hours ago</span> </div>
          </li>
          <li> <i class="icon-paragraph-justify2 text-warning"></i>
            <div> There are <a href="#">6 new tasks</a> waiting for you. Don't forget! <span>About 3 hours ago</span> </div>
          </li>
        </ul>
      </div>
    </li>
   

    <li class="user dropdown"><a class="dropdown-toggle" data-toggle="dropdown"><img src="images/demo/users/face1.png" alt=""><span>{{ username }}</span><i class="caret"></i></a>
      <ul class="dropdown-menu dropdown-menu-right icons-right">
     
        <li><a href = "{% url 'login_simple' %}"><i class="icon-exit"></i> Logout</a></li>
      </ul>
    </li>
  </ul>
</div>
<!-- /navbar -->
<!-- Page container -->
<div class="page-container sidebar-hidden">

  <!-- Page content -->
  <div class="page-content">
    <!-- Page header -->
    <div class="page-header">
      
      
      <div id="reportrange" class="range">
        <div class="visible-xs header-element-toggle"><a class="btn btn-primary btn-icon"><i class="icon-calendar"></i></a></div>
        <div class="date-range"></div>
        <span class="label label-danger">9</span></div>
    </div>
    <!-- /page header -->

    <!-- Search line -->
    <form action="{% url 'graph' %}" method="POST" class="search-line block" role="form">
    {% csrf_token %}
      <span class="subtitle" align="center"> Logo</span>
      <div class="input-group si-wrapper">
        <div class="search-control ">
          <input type="text" class="si-input" placeholder="What are you looking for?" name="query" style="width:100%;">
        </div>  

        <button class="si-btn"> speech input
          <span class="si-mic"></span>
          <span class="si-holder"></span>
        </button>
        
      </div>
      <span class="input-group-btn">
          <button class="btn btn-primary"  type="submit">Search</button>   
        </span>
    </form>
    <!-- /search line -->
    {% if query %}
    <div class="res">The query is: {{ query }}</div>
    {% endif %}
    
   <!-- Footer -->
<div class="footer clearfix" >
  <div class="pull-left">&copy; 2016. BizART <a href="http://themeforest.net/user/Kopyov">A complete Business Intelligence Tool</a></div>
  <div class="pull-right icons-group"> <a href="{% url 'aboutus'%}"><i class="icon-screen2"></i> &nbsp About Us </a>  </div>
</div>
<!-- /footer -->
  </div>
  <!-- /page content -->
</div>
<!-- /page container -->
</body>




<script>
  /*global webkitSpeechRecognition */

(function() {
  'use strict';

  if (! ('webkitSpeechRecognition' in window) ) return;

  var talkMsg = 'start talking';
  var patience = 6;

  function capitalize(str) {
    return str.length ? str[0].toUpperCase() + str.slice(1) : str;
  }

  var speechInputWrappers = document.getElementsByClassName('si-wrapper');

  [].forEach.call(speechInputWrappers, function(speechInputWrapper) {
    // find elements
    var inputEl = speechInputWrapper.querySelector('.si-input');
    var micBtn = speechInputWrapper.querySelector('.si-btn');

    // size and position them
    var inputHeight = inputEl.offsetHeight;
    var inputRightBorder = parseInt(getComputedStyle(inputEl).borderRightWidth, 10);
    var buttonSize = 0.8 * inputHeight;
    micBtn.style.top = 0.1 * inputHeight + 'px';
    micBtn.style.height = micBtn.style.width = buttonSize + 'px';
    inputEl.style.paddingRight = buttonSize - inputRightBorder + 'px';
    speechInputWrapper.appendChild(micBtn);

    // setup recognition
    var finalTranscript = '';
    var recognizing = false;
    var timeout;
    var oldPlaceholder = null;
    var recognition = new webkitSpeechRecognition();
    recognition.continuous = true;

    function restartTimer() {
      timeout = setTimeout(function() {
        recognition.stop();
      }, patience * 1000);
    }

    recognition.onstart = function() {
      oldPlaceholder = inputEl.placeholder;
      inputEl.placeholder = talkMsg;
      recognizing = true;
      micBtn.classList.add('listening');
      restartTimer();
    };

    recognition.onend = function() {
      recognizing = false;
      clearTimeout(timeout);
      micBtn.classList.remove('listening');
      if (oldPlaceholder !== null) inputEl.placeholder = oldPlaceholder;
    };

    recognition.onresult = function(event) {
      clearTimeout(timeout);
      for (var i = event.resultIndex; i < event.results.length; ++i) {
        if (event.results[i].isFinal) {
          finalTranscript += event.results[i][0].transcript;
        }
      }
      finalTranscript = capitalize(finalTranscript);
      inputEl.value = finalTranscript;
      restartTimer();
    };

    micBtn.addEventListener('click', function(event) {
      event.preventDefault();
      if (recognizing) {
        recognition.stop();
        return;
      }
      inputEl.value = finalTranscript = '';
      recognition.start();
    }, false);
  });
})(); 
</script>




</html>